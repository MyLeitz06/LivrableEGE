---
title: "Analyse Airbnb du Pays basque"
author: "Mylène Leitzelman"
date: "10/11/2023"
output: 
  html_document: 
    toc: yes
    toc_depth: 2
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)

#ouvrir la base 
library(readr)
PaysBasque_listings <- read_csv("D:/dataset/Etude Airbnb Module 4&5/Pays_Basque_2023_listings.csv")

library(tidyverse)
library(plyr)
library(dplyr)
library(questionr)
library(gtsummary)
library(ggplot2)
library(lubridate)
library(knitr)
library(DT)
library(highcharter)
library(leaflet)
library(ggcorrplot)
library(stargazer)
library(wordcloud)
library(tm)


#library(grid) # a voir 
#library(gridExtra) # a voir 
#library(maps)
#library(ggnuplot)

```

# 1. Introduction

## 1.1 Le site activiste Inside Airbnb

Ce document présente l’analyse statistique, économétrique et textuelle d’un fichier issu du site [Inside Airbnb](https://insideairbnb.com/). Cette plateforme indépendante et à but non lucratif a été lancée en 2016 par l'activiste américain [Murray Cox](https://www.linkedin.com/in/murrayscox) afin d'explorer l'utilisation réelle d'Airbnb dans les villes du monde entier et de fournir des filtres et des mesures clés pour analyser comment Airbnb concurrence et déstabilise le marché du logement résidentiel local dans le tourisme mondial.

Les données du site *Inside Airbnb* proviennent d'informations publiquement disponibles sur le site [Airbnb](https://www.airbnb.fr/). Ces données ont été analysées, nettoyées, le cas échéant agrégées et sont librement accessibles pour faciliter la discussion publique.

Presque toutes les plus grandes et les plus touristiques des villes du monde sont répertoriées dans *Inside Airbnb*, où il est possible de récupérer les données brutes (en format csv) sur tout un ensemble d'informations comme le type de logement loué par hôte, le type bien immobilier, etc (voir le détail de ce qu'ils appellent leur [Data Dictionary](https://docs.google.com/spreadsheets/d/1iWCNJcSutYqpULSQHlNyGInUvHg2BoUGoNRIGa6Szc4/edit?usp=sharing)).

## 1.2 Un territoire à part entière : Le pays basque

Dans cette étude, le fichier analysé est celui du Pays basque (données de **Juin 2023**), ce choix se fonde sur quelques interrogations : 

* Concernant la France, seulement trois autres villes françaises sont disponibles Paris, Lyon et Bordeaux, alors pourquoi le Pays basque qui ne représente ni une région administrative, ni une ville en particulier (pourquoi pas la Côte d'Azur alors ?)
* Qu'est ce qui représente ce Pays basque (y a t'il une logique dans le choix des villes) ? 

# 2. Objectifs de l'étude

Dans le but de répondre aux interrogations précédentes, cette étude a pour but de mobiliser les techniques d'analyse statistique multiple, exploratoire et textuelle des modules 4 &5. Nous espérons ainsi nous faire une idée du profil des offres de locations et des hôtes qui caractérisent le pays basque chez AirBNB.


|  Questions sur les offres | Questions sur les hôtes  |
|---|---|
|Quel est le type de chambre le plus courant ?|Quels sont les 50 premiers hébergeurs en fonction de leur chiffre d'affaires ?|
|Quel est le top et le bottom 10 des types de propriété en fonction du prix moyen ?|Y a-t-il une différence dans le score des évaluations entre les super-hébergeurs et les hébergeurs normaux ?|
|Quel est le top et le bottom 10 des types de propriété sur la base de la note d'évaluation ?|Y a-t-il une différence dans le taux de réponse entre un superhost et un host normal ?|
|Quels sont les équipements les plus courants ?|Comment le nombre d'hôtes rejoint-il Airbnb au fil du temps ?|
|Quelle répartition géographique des locations ?|Quelle répartition géographique des hôtes ?|


## 2.1 Méthodologie

Le jeu de données étudié regroupe **13648 annonces** (toutes uniques) correspondant au Pays basque, postés par **9646 hôtes** distincts entre mars 2023 et juin 2023 (le dernier listing de septembre 2023 étant sorti récemment). **142 villes** sont citées, où seulement 4 villes représentent plus de 55% des offres (Biarritz, Anglet, Bayonne et Saint-Jean-de-Luz, cf. 3.1.3).

Le tableau comporte **76 variables**, 46 sont quantitatives (dont 5 binaires), 24 sont qualitatives (dont 15 purement en texte libre), 6 correspondent à des dates. 

Si la grande majorité des données provient du scrapping du site web d'Airbnb, certaines variables sont calculées comme les moyennes sur les types de score, les disponibilités ou le cumul des types de location par hôte (rappelons que le but de ce site est aussi de démontrer la gentrification touristique de certains quartiers dans les villes et débusquer les professionnels utilisant Airbnb à des fins mercantiles).

## 2.2 Préparation de la table

Plusieurs transformations ont été nécessaires pour préparer les données, notamment : 

* supprimer certaines colonnes inutiles,
* convertir les dates au bon format,
* convertir les colonnes de chiffres en éléments numérique (telles que les pourcentages),
* supprimer ou transformer les non réponses dans plusieurs colonnes utilisées pour l'analyse ci-après


```{r, echo=TRUE}
#suppression des colonnes inutiles dans l'analyse
PaysBasque_listings <- PaysBasque_listings %>% 
  dplyr::select(-id, -scrape_id, -last_scraped, -source, -host_thumbnail_url, -host_picture_url, -calendar_last_scraped, -license)

#Conversion de factor à numérique
# elimination des pourcentages
PaysBasque_listings$host_response_rate <- as.numeric(gsub("%", "", as.character(PaysBasque_listings$host_response_rate)))/100

PaysBasque_listings$host_acceptance_rate <- as.numeric(gsub("%", "", as.character(PaysBasque_listings$host_acceptance_rate)))/100

# lot de colonnes changé
PaysBasque_listings <- PaysBasque_listings %>%
mutate(across(c(latitude,longitude,review_scores_rating,review_scores_accuracy,review_scores_cleanliness,review_scores_checkin,review_scores_communication,review_scores_location,review_scores_value,reviews_per_month), as.numeric))

# changement des dates avec lubridate
PaysBasque_listings$host_since <- dmy(PaysBasque_listings$host_since)
PaysBasque_listings$host_since_year <- year(PaysBasque_listings$host_since)
PaysBasque_listings$first_review <- dmy(PaysBasque_listings$first_review)
PaysBasque_listings$last_review <- dmy(PaysBasque_listings$last_review)

# changer True/False en t/f
PaysBasque_listings$host_has_profile_pic <- as.factor(gsub("TRUE", "t", PaysBasque_listings$host_has_profile_pic))
PaysBasque_listings$host_has_profile_pic <- as.factor(gsub("FALSE", "f", PaysBasque_listings$host_has_profile_pic))
PaysBasque_listings$host_is_superhost <- as.factor(gsub("TRUE", "t", PaysBasque_listings$host_is_superhost))
PaysBasque_listings$host_is_superhost <- as.factor(gsub("FALSE", "f", PaysBasque_listings$host_is_superhost))
PaysBasque_listings$host_identity_verified <- as.factor(gsub("TRUE", "t", PaysBasque_listings$host_identity_verified))
PaysBasque_listings$host_identity_verified <- as.factor(gsub("FALSE", "f", PaysBasque_listings$host_identity_verified))
PaysBasque_listings$has_availability <- as.factor(gsub("TRUE", "t", PaysBasque_listings$has_availability))
PaysBasque_listings$has_availability <- as.factor(gsub("FALSE", "f", PaysBasque_listings$has_availability))
PaysBasque_listings$instant_bookable <- as.factor(gsub("TRUE", "t", PaysBasque_listings$instant_bookable))
PaysBasque_listings$instant_bookable <- as.factor(gsub("FALSE", "f", PaysBasque_listings$instant_bookable))

# changer les textes en factor
PaysBasque_listings <- PaysBasque_listings %>%
mutate(across(c("name", "host_name", "neighbourhood_group_cleansed", "neighbourhood_cleansed", "room_type", "property_type"), as.factor))

```

Nous présentons dans cette étude l'analyse effectuée sur le corpus choisi, avec en premier lieu, une première approche statistique des locations, de leurs hôtes et des prix pratiqués (chapitre 3). 
Nous développons dans une partie dédiée les analyses plus poussées sur les variables intéressantes retenues afin de définir des tendances de fond sur le corpus Airbnb. Notamment, cette partie propose  une analyse Textmining des variables textuelles nous semblant importantes (chapitre 4).

# 3.Analyse statistique des variables clés
Dans cette partie, nous analysons statistiquement les annonces du listing choisi, leurs hôtes ainsi que les prix, afin de définir si des profils types ressortent.

## 3.1 Océan vs arrière pays : qui gagne ?
La carte ci-dessous présente toutes les annonces du corpus, regroupées en grappes autour de grandes villes "mythiques" du Pays basque, que l'on retrouve plus ou moins dans une variable dédiée `neighbourhood_group_cleansed`.

```{r, warning = FALSE, message=FALSE}

leaflet(PaysBasque_listings %>% 
  select(longitude,neighbourhood_group_cleansed,neighbourhood_cleansed,latitude,price)) %>%
  setView(lng = -1.562670, lat = 43.47372 ,zoom = 9) %>%
  addTiles() %>% 
  addMarkers(
    clusterOptions = markerClusterOptions(),
    label = paste("Location:", PaysBasque_listings$name)
    )

```
Il est intéressant de voir que l'essentiel des offres est en front de mer. L'arrière pays quoique présentant des atouts indéniables pour des annonces de propriétés prestigieuses à louer, reste encore en retrait.

Ci-après, nous cherchons à en savoir plus sur quel sont les types de location et les types de biens immobiliers les plus couramment loués sur ce territoire en juin 2023.

### 3.1.1 Mer ou montagne ? le choix est fait
Voici les premières statistiques sur le type de location (`room_type`) préféré par les clients dans le Pays basque : 

```{r}
resultloc <- PaysBasque_listings %>%
  group_by(room_type) %>%
  dplyr::summarise(frequency = n()) %>%
  arrange(desc(frequency)) %>% 
  dplyr::mutate(room_type = factor(room_type, levels = unique(room_type)))


hchart(resultloc, type = "column", hcaes(x = reorder(room_type, -frequency), y = frequency, color = room_type)) %>%
  hc_plotOptions(column = list(stacking = "normal"), pointWidth = 50) %>%
  hc_xAxis(title = list(text = "Frequence")) %>%
  hc_yAxis(title = list(text = "Nbr d'annonces Airbnb")) %>%
  hc_title(text = "Distribution des types de biens immobiliers loués en Pays Basque") %>%
  hc_legend(enabled = FALSE) %>%
  hc_chart(inverted = TRUE) %>%
  hc_tooltip(
    pointFormat = "Nbr : <b>{point.y}</b>"
  ) %>%
  hc_add_theme(hc_theme_ffx())
```

A remarquer le nombre très infime de chambre d'hôtel, ce qui laisserait à penser que les professionnels n'utilisent pas ce réseau social, remarque infirmée par l'analyse des hôtes (cf. 3.2).

### 3.1.2 Une envie d'espace et d'indépendance 
Les graphe ci-dessous présente les 15 principaux types de biens immobiliers. Le type de propriété (`property_type`) est la version plus granulaire et plus détaillée du type de location.

```{r}
resultroomT2 <- PaysBasque_listings %>% 
group_by(property_type) %>% 
dplyr::summarise(frequency = n()) %>% 
arrange(desc(frequency)) %>%
dplyr::mutate(property_type = factor(property_type, levels = unique(property_type)))

hchart(resultroomT2[1:15, ], type = "column", hcaes(x = reorder(property_type, -frequency), y = frequency, color = property_type)) %>%
  hc_plotOptions(column = list(stacking = "normal", pointWidth = 25)) %>%
  hc_xAxis(title = list(text = "Frequence")) %>%
  hc_yAxis(title = list(text = "Nbr de Biens immobiliers Airbnb")) %>%
  hc_title(text = "Les 15 type de biens immobiliers loués en Pays Basque") %>%
  hc_legend(enabled = FALSE) %>%
  hc_chart(inverted = TRUE) %>%
  hc_tooltip(
    pointFormat = "Nbr : <b>{point.y}</b>"
  ) %>%
  hc_add_theme(hc_theme_ffx())
```

On retrouve l'écrasante majorité des locations de logements entiers (s'agissant de villas, d'appartements, de logements dans des copropriétés, qualifiés de *condo*). La queue du tableau fait apparaître les endroits insolites comme un yourte, une hûte, un château ou des bateaux.


```{r}
resultroomT2 %>% 
  datatable()

```


### 3.1.3 Les grandes villes ont la cote
Il est intéressant de voir quelles villes représentent en majorité ce territoire du Pays basque, pas vraiment un département, ni une région. Quand on se réfère à la page [wikipédia](https://fr.wikipedia.org/wiki/Pays_basque_fran%C3%A7ais) du pays basque, on retrouve à quelques villes près, les villes présentes dans Airbnb. Avec principalement les villes du bord de l'océan, proposant pléthore de locations (nous verrons plus loin que ce ne sont pas celles qui sont les plus chères, cf 3.3.4).

```{r}

resultneighb <- PaysBasque_listings %>% 
  group_by(neighbourhood_cleansed) %>% 
  dplyr::summarize(count =n()) %>% 
  arrange(desc(count))

hchart(resultneighb[1:10, ], type = "column", hcaes(x = reorder(neighbourhood_cleansed, -count), y = count)) %>%
  hc_plotOptions(column = list(stacking = "normal", pointWidth = 35)) %>%
  hc_xAxis(title = list(text = "")) %>%
  hc_yAxis(title = list(text = "Nbr de locations Airbnb")) %>%
  hc_title(text = "Les 10 principales villes des locations") %>%
  hc_legend(enabled = FALSE) %>%
  hc_chart(inverted = TRUE) %>%
  hc_tooltip(
    pointFormat = "Nbr : <b>{point.y}</b>"
  ) %>%
  hc_add_theme(hc_theme_ffx())
```

### 3.1.4 S'évader à tout moment de l'année

La disponibilité des annonces Airbnb varie tout au long de l’année. Les hôtes peuvent configurer le calendrier de leurs annonces de manière à ce qu’elles ne soient disponibles que pendant un certain nombre de jours, ou bien les annonces peuvent être déjà réservées, ce qui limite leur disponibilité.

Il est intéressant de connaître le nombre d’annonces en fonction du nombre de jours pendant lesquels elles sont disponibles au cours d’une année.

La courbe ci-après présente la répartition des annonces en fonction des disponibilités proposées par les hôtes. Par exemple, seulement 238 annonces proposent une disponibilité de 365 jours, s'agissant d'ailleurs des offres les plus chères.

```{r}
availability_count <- PaysBasque_listings %>% 
  group_by(availability_365) %>% 
  dplyr::summarize(count =n()) %>% 
  arrange(availability_365)

# enlève le 0 qui écrase le graphe
availability_count <- availability_count %>%
  filter(availability_365 != 0)

availability_count <- availability_count %>%
  mutate(availability_365 = factor(availability_365, levels = 0:365))

hchart(availability_count, "line", hcaes(x = availability_365, y = count)) %>%
  hc_xAxis(title = list(text = "Nombre de jours disponibles par an")) %>%
  hc_yAxis(title = list(text = "Nombre d'annonces")) %>%
  hc_title(text = "Courbe de disponibilité")  %>%
  hc_tooltip(
    pointFormat = "<b>{point.y}</b> annonces<br>disponibles : <b>{point.x}</b> jours"
  ) %>%
  hc_add_theme(hc_theme_ffx())

```

La moyenne des offres en location sont autour de 175 jours de disponibilité par an, ce qui est élevé. Le parc de maisons secondaires doit être particulièrement important sur ce territoire.

```{r, echo=TRUE}
summary(PaysBasque_listings$availability_365)
```

Il est interessant de creuser le pic que l'on constate des offres de logement sur 364 jours, comme le présente le tableau suivant, où l'on constate qu'il s'agit à plus de 80% de maisons indépendantes entièrement libres.

```{r}
availability_364 <- PaysBasque_listings %>%
  filter(availability_365 == "364") %>%
  group_by(property_type) %>%
  dplyr::summarize(n = n()) %>%
  arrange(property_type)

datatable(availability_364)
```


## 3.2 Profil type du loueur basque
Nous abordons dans cette partie l'analyse plus détaillée des hôtes du corpus. Peut-on dresser un profil type, trouve-t'on des éléments saillants ?

Une première vue est de regrouper dans un même tableau les caractéristiques de ces hôtes : 

```{r}
PaysBasque_listings <- PaysBasque_listings %>%
mutate(across(c(host_listings_count, host_total_listings_count), as.numeric))

sub_listings <- PaysBasque_listings %>%  
  dplyr::select("host_response_time","host_response_rate" ,"host_acceptance_rate", "host_is_superhost", "host_total_listings_count", "host_identity_verified", "instant_bookable" )
sub_listings <- sub_listings[complete.cases(sub_listings), ] #supprime les cellules vides

#création du tableau
sub_listings %>% 
  gtsummary::tbl_summary(type = all_dichotomous() ~"categorical") %>% 
  add_stat_label()
```

25% sont répertoriés en tant que superhôtes (analysé plus loin), notons que le 28% de la variable `instant_bookable` permet de voir si le client peut booker l'annonce automatiquement, le 'true' indique qu'il peut, donc on aurait affaire à des professionnels.

### 3.2.1 Ancrés dans le terroir
Comme il y a plusieurs colonnes dédiées à la présentation des hôtes, une première idée est de savoir d'où ils viennent et si ils habitent sur le même territoire que leurs annonces. 
Le tableau ci-dessous présente l'analyse du champ `host_country`, majoritairement, les hôtes sont domiciliés en France (avec 31% de non réponse quand même, ce qui n'est ps étonnant, vu que le listing cache aussi des professionnels déguisant leur activité, cf. le point suivant).

```{r}
# tableau des host_country

result_host_country <- PaysBasque_listings %>%
  group_by(host_country) %>%
  dplyr::summarise(frequency = n()) %>%
  arrange(desc(frequency))

# ajout d'une colonne pourcentage
result_host_country <- result_host_country %>%
  mutate(percentage = (frequency / sum(frequency)) * 100)

# Formater la colonne "pourcentage" avec deux décimales et le symbole %
result_host_country$percentage <- sprintf("%.2f%%", result_host_country$percentage)

result_host_country %>% 
  datatable(rownames = paste("", 1:nrow(result_host_country)))

```

Presque 40% habite dans les principales villes du pays basque (Biarritz, Anglet, Bayonne, Saint-Jean-de-Luz, Hendaye et Bidart), à l'exception de Paris, on trouve aussi des étrangers louant leur biens secondaires.

```{r}
# tableau des host_location
result_host_loc <- PaysBasque_listings %>%
  group_by(host_location) %>%
  dplyr::summarise(frequency = n()) %>%
  arrange(desc(frequency))

# ajout d'une colonne pourcentage
result_host_loc <- result_host_loc %>%
  mutate(percentage = (frequency / sum(frequency)) * 100)

# Formater la colonne "pourcentage" avec deux décimales et le symbole %
result_host_loc$percentage <- sprintf("%.2f%%", result_host_loc$percentage)

# suppression de la 1er ligne des NA
result_host_loc <- result_host_loc[-1, ]

```

```{r}

hchart(result_host_loc[1:10, ], type = "column", hcaes(x = reorder(host_location, -frequency), y = frequency, color = host_location)) %>%
  hc_plotOptions(column = list(stacking = "normal", pointWidth = 35)) %>%
  hc_xAxis(title = list(text = "")) %>%
  hc_yAxis(title = list(text = "Nbr de d'annonces Airbnb")) %>%
  hc_title(text = "Les 10 principales villes des hôtes") %>%
  hc_legend(enabled = FALSE) %>%
  hc_chart(inverted = TRUE) %>%
  hc_tooltip(
    pointFormat = "Nbr : <b>{point.y}</b>"
  ) %>%
  hc_add_theme(hc_theme_ffx())
```

La répartition suit celle du nombre d'offres, ce qui laisse à penser que ce sont des locaux qui bénéficient du réseaux social pour se faire un complément de revenue (du moins pour ceux qui ont peu d'annonces à proposer). La répartition suivante nous permet de voir combien d'hôtes ont posté X annonces dans le listing.

```{r, echo=TRUE}
table(PaysBasque_listings$calculated_host_listings_count)
```
73% des hôtes ont posté de une à deux annonces, ils représentent en grande majorité les hôtes types d'Airbnb, cherchant à se faire un complément de revenue en louant leur bien partiel ou entier.

### 3.2.2 L'arbre peut cacher la forêt
Il est intéressant d'effectuer un tableau croisé dynamique sur le comptage des hôtes uniques dans tout le corpus, car cela révèle les hôtes qui mènent un véritable business. On retrouve d'ailleurs dans le classement des 50 premiers, des professionnels comme des agences immobilières ou des résidences de vacances.

Par exemple c'est le cas de `Maeva` qui est le nom de l'hôte, derrière se cache [Pierre & Vacances](https://www.airbnb.fr/users/show/400123061), proposant des résidences de tourisme (au demeurant, la ville de l'hôte se trouve à Agay sur la Côte d'Azur). 
Un autre fait marquant est celui de l'agence de voyage basque [Poplidays](https://www.poplidays.com/fr/), qui n'a pas renseigné à dessein le champ `name` (rajouté manuellement pour l'analyse après une petite enquête) et dont les 3 comptes du corpus ont été supprimés très récemment (alors que l'url du [profil](https://www.airbnb.fr/users/show/133059316) fonctionnait il y a une dizaine de jours).

```{r}

# tableau des host_location
result_host_name <- PaysBasque_listings %>%
  group_by(host_name) %>%
  dplyr::summarise(frequency = n()) %>%
  arrange(desc(frequency))


hchart(result_host_name[1:25, ], type = "column", hcaes(x = reorder(host_name, -frequency), y = frequency, color = host_name)) %>%
  hc_plotOptions(column = list(stacking = "normal", pointWidth = 10)) %>%
  hc_xAxis(title = list(text = "")) %>%
  hc_yAxis(title = list(text = "Nbr de d'annonces Airbnb")) %>%
  hc_title(text = "Les 30 hôtes aux annonces multiples") %>%
  hc_legend(enabled = FALSE) %>%
  hc_chart(inverted = TRUE) %>%
  hc_tooltip(
    pointFormat = "Nbr : <b>{point.y}</b>"
  ) %>%
  hc_add_theme(hc_theme_ffx())

```

On peut penser que la mise en visualisation du nombre d'annonce par hôte proposé par le site activiste *inside Aibnb* aide Airbnb à faire le "ménage" dans son listing, du moins en est-il forcé., sous la pression des autorités ou des pouvoirs publics. La mise en lumière de cette statistique est riche en renseignement !

### 3.2.3 Etre au top, ça paye
Airbnb distingue parmi les hôtes ce qui est qualifié de "superhost" (https://www.airbnb.fr/help/article/828) : il s'agit des hôtes expérimentés qui donnent l'exemple aux autres hôtes et font vivre des "expériences extraordinaires" à leurs invités.
 
 Existe t'il une différence dans la distribution des notes d'évaluation pour les annonces appartenant à un super-hôte ou à un hôte normal ?

```{r}
resultsuper <- PaysBasque_listings %>%
  filter(!is.na(review_scores_rating), !is.na(host_is_superhost))%>% 
  filter(host_is_superhost != "") %>%
  select(review_scores_rating, host_id, host_name, host_is_superhost)

resultsuper %>% 
  ggplot(aes(x = review_scores_rating,
             fill = host_is_superhost)) +
  geom_density(alpha = 0.5) +
  labs(x = "Notes d'évaluation",
       y= "Fréquence",
       fill = "Est un Superhost",
       title = "Distribution des notes entre Superhost and Hôte normal") +
  theme(legend.position = "top")
```

Le superhôte et l'hôte normal présentent plus ou moins le même pic de distribution, ce qui indique qu'en moyenne, il n'y a pas de différence significative en ce qui concerne les notes d'évaluation ou l'expérience globale. Effectivement, il est rare de trouver des évaluations en dessous de 3, tant dans ce corpus que généralement dans tout Airbnb, d'après d'autres analyses sur le sujet.
Cependant, la distribution des superhôtes est plus fine que celle des hôtes normaux, ce qui indique que les superhôtes auraient tendance à obtenir des notes d'évaluation plus élevées. Nous essayons de creuser les raisons dans la partie suivante.

```{r, warning=FALSE}
percent_superhost <- PaysBasque_listings %>%
  filter(host_is_superhost != "") %>%
  group_by(neighbourhood_group_cleansed, host_is_superhost) %>%
  dplyr::summarize(n = n()) %>%
  mutate(total = sum(n),
         percent = n / total * 100) %>%
  pivot_wider(names_from = host_is_superhost,
              values_from = percent,
              names_glue = "{host_is_superhost}_percent") %>% dplyr::select(-n)


ggplot(percent_superhost, aes(x = neighbourhood_group_cleansed, y = t_percent ,fill=neighbourhood_group_cleansed)) +
  geom_bar(stat="identity") +
  labs(title = "Pourcentage de SuperHosts par Villes principales", 
       x = "", 
       y = "Pourcentage de superHosts") +
  theme(axis.text.x=element_text(angle = 45, hjust = 1),
        legend.position = "none")
```

Cette visualisation est intéressante pour des spécialistes du tourisme, connaisant au mieux les spécialités de cette région et de leurs communes. Sans trop connaître la région, il est difficile de tirer des conclusions.

### 3.2.4 Quel engouement pour les plateformes sociales ?
Nous vérifions ci-après le nombre d’adhésions mensuelles au fil du temps, que nous indique le champ `host_since`. 

```{r, warning=FALSE}
resultdate <- PaysBasque_listings %>%
  filter(!is.na(host_since)) %>%
  mutate(month = month(host_since), year = year(host_since)) %>%
  group_by(month, year) %>%
  dplyr::summarise(frequency = n())

resultdate$month <- factor(resultdate$month, levels = 1:12, labels = c("janvier", "février", "mars", "avril", "mai", "juin", "juillet", "août", "septembre", "octobre", "novembre", "décembre"))

resultdate %>% 
  ggplot(aes(x = year,
             y = month,
             fill = frequency
             )
         ) +
  geom_tile(color = "white") +
  scale_x_continuous(breaks = seq(2000, 2025, 2) ) +
  theme_minimal() +
  theme(legend.position = "top") +
  scale_fill_viridis_c(option = "B") +
  labs(x = "Année",
       y = "mois",
       fill = "Frequency",
       title = "Evolution du nombre d'hôtes dans le temps"
       ) 
```

Cette heatmap montre qu'une majorité d'hôtes a commencé à rejoindre Airbnb plutôt depuis 2015, avec un record en janvier 2017 (il serait intéressant de savoir pourquoi, est ce que ça serait avec l'arrivée de professionnels comme Poplidays, qui n'a pas renseigné le champ `host_since` au demeurant). 
On voit clairement que ça se ralentit depuis 2019, donc avant le Covid. Mais il semble que les adhésions se maintiennent petitement tout de même, malgré le coup d'arrêt mondial que nous avons subi en 2021/2022.

## 3.3 Première analyse des prix sur les annonces
Avant tout, on peut voir que les prix ont une amplitude énorme des prix de 0 (donc soit un problème de scrapping de l'information, soit un manque sur l'annonce), et à 90 350 euros, pour ce cas particulier s'agissant d'une villa entière à louer à l'année dans la ville de Urrugne.

```{r}
summary(PaysBasque_listings$price)
```

On peut remarquer que la distribution n’est pas régulière et est sûrement liée à la superposition de plusieurs distributions de prix du fait de types de logements différents, comme le montre le graphique suivant : 

```{r}
mytableP <- table(PaysBasque_listings$price)
myframeP <- as.data.frame(mytableP)


hchart(myframeP, type = "column", hcaes(x = Var1, y = Freq)) %>%
  hc_xAxis(title = list(text = "Prix")) %>%
  hc_yAxis(title = list(text = "Nbr d'annonces")) %>%
  hc_title(text = "Distribution des prix") %>%
  hc_tooltip(
  pointFormat = "<b>{point.y}</b> annonces à <b>{point.x}€</b>"
  ) %>%
  hc_add_theme(hc_theme_ffx())

```

Nous avons affiné dans ce graphe les prix en éliminant les valeurs aberrantes (ou du moins non représentatives de l'ensemble), notamment  les prix trop éloignés de la médiane. 

```{r}
testprix <- PaysBasque_listings %>% 
  filter(price > 0) %>% 
  filter(price < quantile(PaysBasque_listings$price, 0.9) & price > quantile(PaysBasque_listings$price, 0.1)) %>%
  select(price, host_id, host_name, name, longitude, latitude, neighbourhood_group_cleansed, neighbourhood_cleansed, room_type, property_type)

hchart(testprix$price, type = "bar") %>%
  hc_xAxis(title = list(text = "Prix")) %>%
  hc_yAxis(title = list(text = "Nbr d'annonces")) %>%
  hc_title(text = "Distribution des prix") %>%
  hc_tooltip(
  pointFormat = "<b>{point.y}</b> annonces à <b>{point.x}€</b>"
  ) %>%
  hc_legend(enabled = F) %>%
  hc_add_theme(hc_theme_ffx())

```

La distribution change fortement en supprimant les quantiles inférieurs et supérieurs de 10% : le prix médian est inchangé, c'est la moyenne qui change de 100 euros. Pour cette raison, nous garderons la médiane des prix dans le reste de l'analyse pour réaliser nos tests.

```{r}
summary(testprix$price)
```

#### 3.3.1 Un petit ou grand chez les autres ?
Nous avons produit le tableau dynamique ci-dessous en croisant plusieurs variables pour faire ressortir des tendances par villes principales (autrement dit les voisinages, ou `neighborhood`) et par type de location, sur la base du prix médian. 

Ce tableau nous permet de distinguer les particularités des villes touristiques du pays basque. On peut remarquer que les prix semblent corrélés positivement à l'aspect typique du lieu (notamment dans l'arrière pays). 

```{r, warning=FALSE, message=FALSE}
options(dplyr.summarise.inform = FALSE) #r enleve le warning
tableRoomPrice <- PaysBasque_listings %>% 
group_by(neighbourhood_group_cleansed, room_type) %>% 
dplyr::summarise(median_price = gsub("\\.0$","0", median(price))) %>%
pivot_wider(names_from = room_type, values_from = median_price)

tableRoomPrice <- tableRoomPrice %>%
  mutate_all(~ replace(., is.na(.),0)) #remplace les NA 

tableRoomPrice %>% 
  datatable(rownames = paste("", 1:nrow(tableRoomPrice)))

```

Pour rappel, on peut comparer les prix réels du listing avec les prix normalisés sur les deux types de biens les plus prisés :

**propriété entière :**

-> prix réel : 
```{r, echo=TRUE}
summary(PaysBasque_listings$price [PaysBasque_listings$room_type=='Entire home/apt'])
```

-> prix normalisé : 
```{r, echo=TRUE}
summary(as.numeric(tableRoomPrice$`Entire home/apt`))
```

**chambre privée :**

-> prix réel : 
```{r, echo=TRUE}
summary(PaysBasque_listings$price [PaysBasque_listings$room_type=='Private room'])
```
-> prix normalisé : 
```{r echo=TRUE}
summary(as.numeric(tableRoomPrice$`Private room`))
```

On peut voir par rapport aux moyennes ci-dessus, quelles villes sortent du lot en étant au dessus, comme Tardets-Sorholus, Espelette ou Saint-Jean-de-Luz pour les chambres louées.

### 3.3.2 Où fait-il bon louer sans trop se ruiner ?
Nous avons voulu creuser la question des prix, en étudiant l'ensemble des 142 villes trouvées dans le corpus, toujours en partant sur la médiane des prix afin de distinguer les villes les plus chères et les moins chères. 

```{r}
nuite_neighbourhood <- PaysBasque_listings %>% 
  group_by(neighbourhood_cleansed) %>% 
  dplyr:: summarize(avg_night_price = median(price)) %>% 
  arrange(desc(avg_night_price))

nuite_neighbourhood <- nuite_neighbourhood[-1, ] # supprime 1er ligne aberrante

#plot des plus chères villes
ggplot(nuite_neighbourhood[1:10, ], aes(x = reorder(neighbourhood_cleansed, avg_night_price),  y = avg_night_price, fill = avg_night_price)) + 
  geom_bar(stat = "identity") + ggtitle("Les 10 villes les plus chères") + 
  theme(plot.title = element_text(hjust = 0.5, size = 16, face = "bold"),
        axis.title = element_text(hjust = 0.5, size = 12),
        axis.text = element_text(size = 12)) + scale_y_continuous(labels = function(x) paste0(x, "€")) +
  xlab("") + ylab("Prix de la nuité Airbnb") + coord_flip() + theme(legend.position = "none") + scale_fill_gradient(low = "yellow", high = "red")

#Plot des moins chères
ggplot(nuite_neighbourhood[(nrow(nuite_neighbourhood) - 10) : nrow(nuite_neighbourhood), ], aes(x = reorder(neighbourhood_cleansed, avg_night_price),  y = avg_night_price, fill = avg_night_price)) + 
  geom_bar(stat = "identity") + ggtitle("Les 10 villes les moins chères") + 
  theme(plot.title = element_text(hjust = 0.5, size = 16, face = "bold"),
        axis.title = element_text(hjust = 0.5, size = 12),
        axis.text = element_text(size = 12)) + scale_y_continuous(labels = function(x) paste0(x, "€")) +
  xlab("") + ylab("Prix de la nuité Airbnb") + coord_flip() + theme(legend.position = "none") + scale_fill_gradient(low = "green",  high = "blue")
```

Ce graphique est intéressant pour des responsables touristiques ou d'aménagement du territoire, car il permet de visualiser les contrastes au sein d'un même espace géographique.

### 3.3.3 Beaucoup de choix et peu d'elus 
Les appartements (propriétés privées ou en copropriété) sont-ils devenus des choix populaires parce qu'ils constituent l'option la moins chère proposée par l'hôte ? Pour répondre à cette question, nous avons calculé le top 10 des plus chers et le top 10 des moins chers des types de biens en fonction du prix médian pour une fréquence d'au moins 10 annonces différentes.

```{r}
# Top 10 des biens par rapport au prix
resultT_top10 <- PaysBasque_listings %>% 
group_by(property_type) %>% 
dplyr::summarise(average_price = median(price), frequency = n()) %>% 
filter(frequency >= 10) %>% 
arrange(desc(average_price)) %>% 
head(10)

resultT_top10 <- resultT_top10 %>% 
  mutate(type = "Top 10 plus chers") # ajout d'une colonne

resultT_bottom10 <- PaysBasque_listings %>%
  group_by(property_type) %>%
  dplyr::summarise(average_price = median(price), frequency = n()) %>%
  filter(frequency >= 10) %>%
  arrange(average_price) %>%
  head(10)
  
resultT_bottom10 <- resultT_bottom10 %>% 
  mutate(type = "Top 10 moins chers")

# création du dataframe
resultT_price_rank <- resultT_top10 %>% 
  bind_rows(resultT_bottom10)
  
resultT_price_rank %>% 
  ggplot(aes(x = average_price, 
             y = property_type %>% reorder(average_price),
             fill = type)
         ) + 
  geom_col() +
  scale_fill_manual(values = c("#FF6500", "skyblue")) +
  labs(x = "Prix médian",
       y = NULL,
       fill = NULL,
       title = "Répartition des biens immobiliers des plus au moins chers",
       subtitle = "pour des biens immobiliers ayant au moins une fréquence de 10 annonces")
```

Clairement la réponse est non, les offres majoritaires sont dans l'ensemble bien au dessus de la moyenne des prix, pour passer des vacances à moindre coût dans le Pays basque, la recherche de logements typiques semble être une option de choix. 

### 3.3.4 La carte des prix
Finalement nous proposons de refermer cette partie par une nouvelle carte, présentant sous forme de points les annonces triées par seuil de prix (prix réel). On voit plus clairement que l'arrière pays recèle quelques propriétés entières à louer, d'où les prix plus élevés que sur la côte.
Par contre, sur la côte, on trouve de tout en terme de logement dans toutes les gammes de prix.

```{r}

testprix2 <- PaysBasque_listings %>%
  mutate(price_group = cut(price, 
                          breaks = c(0, 20, 80, 200, 500, Inf),
                          labels = c("0-20", "21-80", "81-200", "201-500", "500+"))) 


```

```{r, message=FALSE}
# Définir la palette de couleurs en fonction des groupes de prix
pal <- colorFactor(palette = c("green", "blue", "purple", "yellow", "red"), 
                   domain = testprix2$price_group)

# Créer la carte Leaflet avec les couleurs en fonction des groupes de prix

leaflet(data = testprix2) %>% 
  addProviderTiles("Esri.WorldGrayCanvas") %>%  
  addCircleMarkers(~longitude, ~latitude, color = ~pal(price_group), 
                   weight = 1, radius = 5, fillOpacity = 0.7, opacity = 1,
                   label = paste("Prix:", testprix2$price)) %>% 
  addLegend("bottomright", pal = pal, values = ~price_group,
            title = "Prix des annonces",
            opacity = 0.5
  )
```


# 4. Analyses exploratoires multiples

## 4.1 Qu'est ce qui fait courir les prix ?

Pour essayer de creuser ce qui pourrait nous aider à définir des tendances significatives sur ce territoire, nous avons tracé le graphique de corrélation entre les variables numériques du corpus. 
Les valeurs du graphique indiquent les  p values de corrélation (calculées à l’aide de la fonction corr du package ggcorrplot). 
Pour rappel, une p value faible indique une indépendance des variable.  

```{r}
# Selection des variables numeriques
corr <- PaysBasque_listings %>% 
  dplyr::select(c("host_response_rate", "host_acceptance_rate", "host_total_listings_count", "accommodates", "bedrooms", "price", "minimum_nights", "maximum_nights", "review_scores_rating", "review_scores_accuracy","review_scores_cleanliness", "review_scores_checkin", "review_scores_communication", "review_scores_location", "review_scores_value")) %>%  .[complete.cases(.), ]

# arrondir les valeurs de correlation à 2 decimales
corr_num <- round(cor(select_if(corr, is.numeric)), 2)

# library ggcorrplot. la taille depend de la valeur du coefficient de correlation.
ggcorrplot(corr_num, type = "lower", lab = TRUE,
            lab_size = 2, method = "circle")
```

La corrélation la plus élevée concerne évidemment la relation entre la capacité maximum de personnes (*accomodates*) et le nombre de chambres proposés (0,86). Le graphe montre aussi que toutes les notes d’évaluation ont une forte corrélation entre elles avec une valeur pour presque tous supérieure à 0,5 (à cela rien d'étonnant).

En revanche, le prix a une très faible corrélation avec le nombre de chambres et de capacité autorisés dans un endroit. De même, le prix a également une corrélation très faible voire négative avec les notes d’évaluation, ce qui montre que le prix n’a pas d’effet sur les notes d’évaluation des clients. 
On pourrait émettre l'hypothèse que les scores d’évaluation dépendent d’autres facteurs et non du prix, par exemple que si un hôte traite bien ses clients, il peut obtenir un score d’évaluation élevé.

## 4.3 Tentative de modélisation
En nous inspirant d'autres études, notamment du travail du chercheur Christophe Benavent sur les données de Paris (cf.[Airbnb à Paris - l’analyse des prix](https://r.benavent.fr/statelemAirbnbParis.html), nous avons essayé d'appliquer ses formules à nos données pour faire ressortir les dépendances de certaines variables en vue d'expliquer les prix pratiqués. 
Les résultats de la démarche sont présentés ci-après dans un tableau présentant le résultat des trois modélisations effectuées.

```{r, echo=TRUE, warning=FALSE, message=FALSE}
PaysBasque_listings$bedrooms[PaysBasque_listings$bedrooms>8]<-NA
PaysBasque_listings$bedrooms2<-as.factor(PaysBasque_listings$bedrooms)
PaysBasque_listings$room_type2<-PaysBasque_listings$room_type
PaysBasque_listings$room_type2[PaysBasque_listings$room_type=="Shared room"]<-NA

reg1<-lm(price~bedrooms+room_type2,data=PaysBasque_listings)

PaysBasque_listings$lprice<-log(PaysBasque_listings$price+1)

reg2<-lm(price~bedrooms+room_type2+bedrooms*room_type2,data=PaysBasque_listings)

reg3<-lm(lprice~bedrooms+room_type2,data=PaysBasque_listings)

stargazer(reg1,reg2,reg3,title="Résultats des régressions",
                    align=TRUE,digits=2,
                    type = "text",no.space=TRUE)
```

Nous voyons clairement que la dernière régression a un meilleur R² par rapport aux modèles 1 et 2. Contrairement aux analyses de C Benavent sur Paris, seul le nombre de chambres semble avoir une influence sur les prix. 
Rien ne ressort sur l'influence du type de location, mis à part pour les chambres d'hôtel. On serait tenté de dire que ça semble normal, le prix étant nettement plus élevé dans une hôtellerie professionnelle, mais ce n'est pas évident d'aller plus loin dans l'interprétation.

## 4.3 Un tourbillon de mots
Nous présentons dans cette sous-partie quelques analyses des textes issus des variables comportant du texte dans le corpus.

### 4.3.1 L'originalité se niche dans le détail 
Le wordcloud suivant met en forme les mots de la variable `name` c'est à dire le titre du bien. Nous avons choisi de voir si il y a une différence entre les titres des biens type logement entier ou chambre privée. 

**Wordcloud des mots des titres concernant le type "Logement entier"**

```{r, warning=FALSE}
WC_appart <- PaysBasque_listings %>% 
                  filter(room_type == "Entire home/apt",
                          number_of_reviews > 2) %>% 
                  select(name)


wordcloud(words = WC_appart$name, 
          min.freq = 2, 
          max.words = 100, 
          color=brewer.pal(8, "Dark2"),
          random.order = F,
          rot.per = 0.35)
```

**Wordcloud des mots des titres concernant le type "Chambre privée"**

```{r, warning=FALSE}
WC_privroom <- PaysBasque_listings %>% 
              filter(room_type == "Private room",
                     price < 300,
                     number_of_reviews > 5) %>% 
            select(name)

wordcloud(words = WC_privroom$name, 
          min.freq = 1, 
          max.words = 100, 
          color=brewer.pal(8, "Dark2"),
          random.order = F,
          rot.per = 0.35)
```

On peut dire que les différences frappantes sont autour de termes plus chaleureux caractérisant les chambres à louer, liées probablement à plus d'intimité dans les rapports hôtes/clients.

**Les mots des Descriptions / Logement entier**

Le wordcloud suivant sur le champ `description` des annonces donne plus d'information sur ce qui peut caractériser ces dernières. On voit clairement les termes cuisine, terrasse, plage, parking ou jardin, mis à part les termes triviaux comme appartement ou space. 
A noter que des termes anglais sont aussi dans le wordcloud car beaucoup de descriptions sont bilingues. Une analyse plus poussée sur les langues pourrait être faite afin de séparer les langues.

```{r}
WC_appart1 <- PaysBasque_listings %>% 
                  filter(room_type == "Entire home/apt",
                          number_of_reviews > 2) %>% 
                  select(description)

WC_appart1 <- VCorpus(VectorSource(WC_appart1))

WC_appart1 <- tm_map(WC_appart1, stripWhitespace)
WC_appart1 <- tm_map(WC_appart1, content_transformer(tolower))
WC_appart1 <- tm_map(WC_appart1, removeWords, c(stopwords("fr"), "avec", "une", "pour", "les", "vous", "dans", "des", "peu", "the", "tous", "toute", "toutes", "sont", "nous", "entre", "and", "with", "this", "for", "from", "are"))
WC_appart1 <- tm_map(WC_appart1, removePunctuation)

```

```{r, warning=FALSE}
wordcloud(words = WC_appart1, 
          min.freq = 2, 
          max.words = 150, 
          color=brewer.pal(8, "Dark2"),
          random.order = F,
          use.r.layout = F,
          rot.per = 0.35)
```

**Les mots des Descriptions / Chambre privée**

Les mots de la description concernant les annonces de chambres privées semblent plus détaillée en information descriptives que dans le titre, mais pas un mot particulier ne sort (mis à part les plus triviaux). On retrouve terrasse, jardin, cuisine, et aussi **petit** (bien distinct par rapport au type appartement entier !).

```{r}

WC_privroom1 <- PaysBasque_listings %>% 
                  filter(room_type == "Private room",
                          number_of_reviews > 2) %>% 
                  select(description)

WC_privroom1 <- VCorpus(VectorSource(WC_privroom1))

WC_privroom1 <- tm_map(WC_privroom1, stripWhitespace)
WC_privroom1 <- tm_map(WC_privroom1, content_transformer(tolower))
WC_privroom1 <- tm_map(WC_privroom1, removeWords, c(stopwords("fr"), "avec", "une", "pour", "les", "vous", "dans", "des", "peu", "the", "tous", "toute", "toutes", "sont", "nous", "entre", "and", "with", "this", "for", "from", "are"))
WC_privroom1 <- tm_map(WC_privroom1, removePunctuation)
```

```{r, warning=FALSE}
wordcloud(words = WC_privroom1, 
          min.freq = 2, 
          max.words = 150, 
          color=brewer.pal(8, "Dark2"),
          random.order = F,
          use.r.layout = F,
          rot.per = 0.35)
```

### 4.3.2 Savoir accueillir
Enfin il nous semble qu'une analyse textuelle de la liste d'équipements accompagnant chaque annonce serait intéressante, elle nécessite un peu de traitement, car elle est dans la base au format json.

Pour Airbnb, la [liste des 10 équipements](https://www.airbnb.fr/resources/hosting-homes/a/the-amenities-guests-want-25) les plus recherchés par les client sont : 

* Une piscine
* Le wifi
* Une cuisine
* Le stationnement gratuit
* Un jacuzzi
* Un lave-linge ou un sèche-linge
* La climatisation ou le chauffage
* L'arrivée autonome
* Un espace de travail pour ordinateur
* Animaux de compagnie acceptés

Nous pouvons voir ci-après si nous retrouvons ces termes dans l'analyse textuelle de la colonne `amenities`.

```{r}
resultverif <- PaysBasque_listings %>%
  filter(!is.na(host_verifications)) %>% 
  select(host_id, host_name, amenities) %>% 
  mutate(amenities = tolower(amenities))
```

```{r}
list_amenities <- map(resultverif$amenities, function(x) x %>% strsplit(", ") %>% unlist() ) %>% 
  unlist()

df_amenities <- data.frame(amenities = list_amenities)

```

```{r}
df_amenities$amenities <- gsub("\\[|\\]", "", df_amenities$amenities)
df_amenities$amenities <- str_replace(df_amenities$amenities, "\"","")
df_amenities$amenities <- str_replace(df_amenities$amenities, "\"","")

amenitiescount <- df_amenities %>%
  dplyr::group_by(amenities) %>%
  dplyr::summarize(count = n()) %>% 
  filter(amenities != "") %>%
  arrange(desc(count))
```

Le graphe ci-après présente le top 20 des termes les plus fréquents dans la liste d'équipement proposée dans les annonces, on ne retrouve pas tout à fait la liste des essentiels :

```{r}

hchart(amenitiescount[1:20, ], type = "column", hcaes(x = reorder(amenities, -count), y = count, color = amenities)) %>%
  hc_plotOptions(column = list(stacking = "normal", pointWidth = 10)) %>%
  hc_xAxis(title = list(text = "Fréquence")) %>%
  hc_yAxis(title = list(text = "Equipements")) %>%
  hc_title(text = "Les plus cités des équipements") %>%
  hc_legend(enabled = FALSE) %>%
  hc_chart(inverted = TRUE) %>%
  hc_tooltip(
    pointFormat = "Nbr : <b>{point.y}</b>"
  ) %>%
  hc_add_theme(hc_theme_ffx())
```

Le wordcloud propose une vue pour facile des termes saillants, outre les éléments classiques, on trouve *mountain view*, *sea view*, *ocean view*, *beach view* et *beach access*, *sun loungers*... Nous sommes bien sur la côte !

```{r, warning=FALSE}
wordcloud(amenitiescount$amenities, 
          freq= amenitiescount$count,
          color=brewer.pal(8, "Dark2"),
          min.freq= 2,
          max.words = 150, 
          random.order = F,
          rot.per = 0.35)
```

Inside Airbnb propose aussi en téléchargement le listing des avis des clients, très riche en texte, qui pourrait être ajouté au listing des offres pour approfondir l'analyse des sentiments (non inclus dans cette étude).

# 5. Conclusion de l'étude

Le corpus des offres Airbnb du Pays basque a pu donner beaucoup d'information pour tenter de qualifier l'offre touristique de ce territoire. Enormément d'informations et de croisement sont possibles. Les variables numériques, logiques et textuelles nombreuses permettent de triturer les données dans tous les sens, à l'infini. 

On peut tirer déjà quelques conclusions sur le ou les profils des hôtes et des types de locations proposées dans le Pays basque qui jouit à la fois de ses atouts terre et mer, de lieux pittoresques chargés d'histoire et sa très bonne qualité de vie. Bien évidemment, d'autres analyses plus poussées pourraient nous aider à aller plus au fond des choses.

Il a fallu faire des choix sur ce qui était possible de faire dans le temps imparti. Mes choix se sont naturellement orientés sur mes thèmes de prédilection que sont la visualisation de données et le textmining. Donc pour ce qui concerne les analyses économétriques et topologiques, un recul et une expertise méthodologique m'ont manqué pour avancer sur cette partie.

